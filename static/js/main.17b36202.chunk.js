(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,function(e,n,t){e.exports=t(21)},,,,,function(e,n,t){},,function(e,n,t){},,function(e,n,t){},,function(e,n,t){},,function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),r=t(7),i=t.n(r),c=(t(13),t(1)),l=t(2),s=t(4),u=t(3),f=t(5),p=(t(15),t(17),function(e){function n(e){var t;return Object(c.a)(this,n),(t=Object(s.a)(this,Object(u.a)(n).call(this,e))).state={},t}return Object(f.a)(n,e),Object(l.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{className:"Planes-root"},o.a.createElement("div",{className:"Planes-container"},o.a.createElement("h4",{className:"Planes-noOfPlanes"},this.props.noOfPlanes),o.a.createElement("span",{className:"Planes-title"},"Planes within 10 km")))}}]),n}(a.Component)),d=(t(19),o.a.createElement("div",{className:"PlanesInfo-header"},o.a.createElement("p",null,"CallSign"),o.a.createElement("p",null,"Country"),o.a.createElement("p",null,"Speed \xa0 (km/hr)"),o.a.createElement("p",null,"Altitude (ft)"))),h=function(e){function n(){return Object(c.a)(this,n),Object(s.a)(this,Object(u.a)(n).apply(this,arguments))}return Object(f.a)(n,e),Object(l.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{className:"PlanesInfo-root"},d,o.a.createElement("div",{className:"PlanesInfo-"},this.props.planes&&this.props.planes.map(function(e,n){return o.a.createElement("div",{key:e[0],className:"PlanesInfo-row"},o.a.createElement("p",null,e[1]||"N/A"),o.a.createElement("p",null,e[2]||"N/A"),o.a.createElement("p",null,Math.floor(3.6*e[9])||"N/A"),o.a.createElement("p",null,Math.floor(3.28084*e[13])||"N/A"))})))}}]),n}(a.Component),m=6371,v=function(e){return new Promise(function(e,n){var t;"geolocation"in navigator?navigator.geolocation.getCurrentPosition(function(n){t={latitude:n.coords.latitude,longitude:n.coords.longitude},e({currentLocation:t,timestamp:n.timestamp})}):n(new Error("Geolocation not available!"))})};function g(e){return e*(Math.PI/180)}function w(e){return e*(180/Math.PI)}var b=function(e,n,t){if(n&&e.latitude===n.latitude&&e.longitude===n.longitude&&t)return t;var a=e.latitude,o=e.longitude;return t={lamin:a-w(10/m),lamax:a+w(10/m),lomin:o-w(10/m/Math.cos(g(a))),lomax:o+w(10/m/Math.cos(g(a)))}},E=function(e){navigator.serviceWorker.ready.then(function(n){n.showNotification("There are currently ".concat(e," planes flying around you."))})},O="https://opensky-network.org/api/states/all?",y=function(e){function n(e){var t;return Object(c.a)(this,n),(t=Object(s.a)(this,Object(u.a)(n).call(this,e)))._process=function(){v(t.state.prevLocation).then(function(e){return e}).then(function(e){var n=b(e.currentLocation,t.state.prevLocation),a=Object.keys(n).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])}).join("&");return t.setState({prevLocation:e.currentLocation,lastAcquiredAt:e.timestamp}),fetch(O+a)}).then(function(e){return e.json()}).then(function(e){t.setState({noOfPlanes:e.states&&e.states.length,planes:e.states},function(){E(t.state.noOfPlanes)})})},t.state={noOfPlanes:0,planes:[],lastAcquiredAt:null,prevLocation:null,prevBoundingBox:null},t}return Object(f.a)(n,e),Object(l.a)(n,[{key:"componentDidMount",value:function(){this._process(),setInterval(this._process,15e3)}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement("div",{className:"header"},o.a.createElement("p",{style:{textAlign:"center"}}," Air ",o.a.createElement("span",{style:{fontWeight:100}}," planes "))),"  ",o.a.createElement(p,{noOfPlanes:this.state.noOfPlanes})," ",o.a.createElement(h,{planes:this.state.planes}),"  ")}}]),n}(a.Component),P=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function k(e,n){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(o.a.createElement(y,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/airplanes",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var n="".concat("/airplanes","/service-worker.js");P?(function(e,n){fetch(e).then(function(t){var a=t.headers.get("content-type");404===t.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):k(e,n)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(n,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):k(n,e)})}}()}],[[8,2,1]]]);
//# sourceMappingURL=main.17b36202.chunk.js.map